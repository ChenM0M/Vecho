<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vecho Icon Generator</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            padding: 20px;
            background: #f4f4f5;
            color: #18181b;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        h1 {
            margin-top: 0;
        }

        .preview-grid {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .preview-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .preview-box {
            border: 1px solid #e4e4e7;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: conic-gradient(#f4f4f5 90deg, #fff 90deg 180deg, #f4f4f5 180deg 270deg, #fff 270deg);
            background-size: 20px 20px;
        }

        button {
            background: #18181b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: opacity 0.2s;
        }

        button:hover {
            opacity: 0.9;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: #fafafa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e4e4e7;
        }

        label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        input[type="color"] {
            border: none;
            width: 30px;
            height: 30px;
            padding: 0;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Icon Generator</h1>
        <p>This tool renders the Vecho SVG logo into PNGs for your application.</p>

        <div class="controls">
            <label>
                Color:
                <input type="color" id="strokeColor" value="#000000">
            </label>
            <label>
                Background:
                <select id="bgColor">
                    <option value="transparent">Transparent</option>
                    <option value="#ffffff">White</option>
                    <option value="#000000">Black</option>
                </select>
            </label>
        </div>

        <div class="preview-grid" id="grid">
            <!-- content generated by js -->
        </div>

        <button onclick="downloadAll()">Download All Assets</button>
    </div>

    <script>
        const svgPath = `<svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 24 24" fill="none" stroke="{COLOR}" stroke-width="2.5" stroke-linecap="square" stroke-linejoin="miter"><path d="M12 2v4" /><path d="m16.2 7.8 2.9-2.9" /><path d="M18 12h4" /><path d="m16.2 16.2 2.9 2.9" /><path d="M12 18v4" /><path d="m4.9 19.1 2.9-2.9" /><path d="M2 12h4" /><path d="m4.9 4.9 2.9 2.9" /></svg>`;

        const sizes = [
            { w: 1024, h: 1024, name: 'source-1024.png' },
            { w: 512, h: 512, name: 'icon.png' }, // Standard Tauri/Web
            { w: 128, h: 128, name: '128x128.png' },
            { w: 32, h: 32, name: 'favicon-32x32.png' }
        ];

        function render() {
            const color = document.getElementById('strokeColor').value;
            const bg = document.getElementById('bgColor').value;
            const grid = document.getElementById('grid');
            grid.innerHTML = '';

            sizes.forEach(size => {
                const wrapper = document.createElement('div');
                wrapper.className = 'preview-item';

                const canvas = document.createElement('canvas');
                canvas.width = size.w;
                canvas.height = size.h;

                // Display size style (max 200px)
                const displayScale = Math.min(1, 200 / size.w);
                canvas.style.width = (size.w * displayScale) + 'px';
                canvas.style.height = (size.h * displayScale) + 'px';
                canvas.className = 'preview-box';
                canvas.id = 'c-' + size.w;

                const ctx = canvas.getContext('2d');

                // Draw logic
                const img = new Image();
                const svgBlob = new Blob([svgPath.replace('{COLOR}', color)], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(svgBlob);

                img.onload = () => {
                    // Fill BG
                    if (bg !== 'transparent') {
                        ctx.fillStyle = bg;
                        ctx.fillRect(0, 0, size.w, size.h);
                    } else {
                        ctx.clearRect(0, 0, size.w, size.h);
                    }

                    ctx.drawImage(img, 0, 0, size.w, size.h);
                    URL.revokeObjectURL(url);
                };
                img.src = url;

                wrapper.appendChild(canvas);

                const label = document.createElement('span');
                label.innerText = `${size.w}x${size.h}`;
                label.style.fontSize = '12px';
                label.style.color = '#71717a';
                wrapper.appendChild(label);

                grid.appendChild(wrapper);
            });
        }

        function downloadAll() {
            sizes.forEach(size => {
                const canvas = document.getElementById('c-' + size.w);
                const link = document.createElement('a');
                link.download = size.name;
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }

        // Init
        document.getElementById('strokeColor').addEventListener('input', render);
        document.getElementById('bgColor').addEventListener('change', render);
        render();
    </script>
</body>

</html>